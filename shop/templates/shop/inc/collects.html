{% load static %}
<style>
    .label-tops {
        position: absolute;
        background-color: rgb(0, 0, 0);
        color: #fff;
        top: 0;
        left: 5px;
        margin-top: 3px;
        width: 45px;
        z-index: 10;
        padding: 3px;
        font-size: .7rem;
        font-weight: 600;
        border-radius: 3px;
        text-transform: uppercase;
        
    }
</style>
<div class="container-fluid " style="margin-top: 90px;">
    <div class="row g-2">
        

        <div class="col-md-3">

            <ul id="brandList" style="list-style-type: none;">
                {% for item in productcollection %}
                  <li class="mb-2" style="font-size: large;"><input type="checkbox" class="brand-checkbox brand me-3" value="{{ item.brand_name }}">{{ item.brand_name }}</li>
                {% endfor %}
              </ul>
            
        </div>

        


        <div class="col-md-9">

            <div class="row g-2">
                {% for item in productcollection %}

                <div class=" col-md-4 col-lg-3 {{ item.brand_name }}">

                    <div class="card" style="box-shadow: rgba(111, 102, 100, 0.2) 0px 7px 29px 0px;">
                        <div class="label-top shadow-sm rounded-circle ">
                            <a class="text-white text-decoration-none " href="{% url 'product_details' group_names item.name_product %}">{{item.discount_percentage |stringformat:"d" }}%</a>
                        </div>
                        <a href="{% url 'product_details' group_names item.name_product %}">
                            <img src="{{item.image_product.url}}" class="img-fluid mt-3 product-images "
                                alt="product.title" />
                        </a>
                        <div class="card-body">
                            {% if item.trending %}
                            <div class="label-tops shadow-sm">
                                <a class="text-white text-decoration-none" href="#">Trend</a>
                              </div>
                            {% endif %}
                            <h5 class="card-title text-center  text-uppercase mt-2 "
                                style="font-size: 20px; color:#085ca4">
                                {{item.name_product}}</h5>
                            <!-- <p class="d-flex justify-content-justify align-items-justify text-secondary">Lorem ipsum dolor sit amet, consectetur adipisicing elit. Totam, tenetur. -->
                            </p>
                            <div class="d-flex justify-content-center align-items-center">
                                <h5 class="mb-1 me-1 " style="color:#599847; font-size: 25px;">
                                    ₹{{item.discounted_price}}</h5>
                                <span class="price-hp mt-2"><s>₹{{item.mrp_price}}</s></span>

                            </div>
                            <h5 class="d-flex justify-content-center align-items-center text-danger"
                                style="font-size: 13px;">Discount: ₹{{item.discount_amount}}</h5>

                            <a href="#" class="btn btn-success buy-content w-100 text-center text-uppercase "><i
                                    class="fas fa-bag-shopping me-2"></i>Buy Now</a>
                            <a href="{% url 'product_details' group_names item.name_product %}"
                                class="d-flex align-items-center justify-content-center text-secondary">More
                                Details</a>

                        </div>
                    </div>


                </div>
                {% endfor %}

            </div>

        </div>
    </div>
</div>
<script>
  const priceRangeInputs = document.querySelectorAll('.price-range');

  priceRangeInputs.forEach(input => {
    input.addEventListener('input', function() {
      const minPrice = parseInt(this.value);
      const maxPrice = parseInt(this.max);

      const productCards = document.querySelectorAll('.col-md-4');

      productCards.forEach(card => {
        const priceElement = card.querySelector('.price-hp s');
        const price = parseInt(priceElement.textContent.replace('₹', ''));

        if (price >= minPrice && price <= maxPrice) {
          card.style.display = 'block';
        } else {
          card.style.display = 'none';
        }
      });
    });
  });
</script>